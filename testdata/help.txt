# Test that basic command help works

env PREGUIDE_IMAGE_OVERRIDE=
env PREGUIDE_PULL_IMAGE=
env PREGUIDE_PRESTEP_DOCKEXEC=

# Explicit help flag
! preguide -help
cmp stderr help.txt

# Missing command
! preguide
cmp stderr missing_command.txt

# Command help
preguide help gen
cmp stdout gen_command_help.txt

-- help.txt --
Usage of preguide:

    preguide <command>

The commands are:

    init
    gen

Use "preguide help <command>" for more information about a command.

preguide defines the following flags:

	  -debug
	        include debug output
-- missing_command.txt --
missing command
Usage of preguide:

    preguide <command>

The commands are:

    init
    gen

Use "preguide help <command>" for more information about a command.

preguide defines the following flags:

	  -debug
	        include debug output
-- gen_command_help.txt --
usage: preguide gen

	  -compat
	        render old-style PWD code blocks
	  -image string
	        the image to use instead of the guide-specified image
	  -out string
	        the target directory for generation
	  -prestep string
	        the image and docker flags passed to dockexec when running the pre-step (if there is one)
	  -pull string
	        try and docker pull image if missing
	  -raw
	        generate raw output for steps
	  -skipcache
	        whether to skip any output cache checking
