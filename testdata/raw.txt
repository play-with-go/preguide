# Test that we get the expected output when using -raw

# A run should generate stdout but no out/gen_out.cue file
preguide gen -raw -out _output
cmp stdout raw/stdout
! stderr .+
! exists raw/out/gen_out.cue

-- raw/en.markdown --
---
title: A test with raw output
---

<!--step: step1 -->
-- raw/steps.cue --
package steps

import "github.com/play-with-go/preguide"

Image: "this_will_never_be_used"

Steps: step1: en: preguide.#Command & { Source: """
echo -n "Hello, world!"
"""}
-- raw/stdout --
package out

{
	PreStep: {
		Package: ""
		Version: ""
	}
	Image: "playwithgo/go1.14.4@sha256:a4bd24f1f831b0ff9674810b258f547961491282da5e339dd1af36f71bc336f8"
	Langs: {
		en: {
			Steps: {
				step1: {
					Name:  "step1"
					Order: 0
					Stmts: [{
						Negated:  false
						CmdStr:   "echo -n \"Hello, world!\""
						ExitCode: 0
						Output:   "Hello, world!"
					}]
				}
			}
			Hash: "152562381a46c5f0063ae18f5ff7f38a7444deef1e13ea54c716e471d58b9136"
		}
	}
}
