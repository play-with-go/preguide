# Test that we get the expected output when using -raw

# A run should generate stdout but no out/gen_out.cue file
preguide gen -raw -out _output
cmp stdout raw/stdout
! stderr .+
! exists raw/out/gen_out.cue

-- raw/en.markdown --
---
title: A test with raw output
---

<!--step: step1 -->
-- raw/steps.cue --
package steps

import "github.com/play-with-go/preguide"

Image: "this_will_never_be_used"

Steps: step1: en: preguide.#Command & { Source: """
echo -n "Hello, world!"
"""}
-- raw/stdout --
package out

{
	Prestep: [{
		Package: ""
		Version: ""
	}]
	Image: "playwithgo/go1.14.4@sha256:94e0f5cdc221034048679cfd00b29d2410a55696d933c309718530c2bb0f06ea"
	Langs: {
		en: {
			Steps: {
				step1: {
					Name:  "step1"
					Order: 0
					Stmts: [{
						Negated:  false
						CmdStr:   "echo -n \"Hello, world!\""
						ExitCode: 0
						Output:   "Hello, world!"
					}]
				}
			}
			Hash: "e2b29b36645fa4febd5add7b40034816fc19cb4f3c440a31e6d1db538634d506"
		}
	}
}
